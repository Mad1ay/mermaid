# WP-FR6.9.1: Робочий процес виконання замовлення

## Загальна інформація

- **ID:** WP-FR6.10.1
- **Назва:** Робочий процес: Виконання замовлення
- **Актори:** Адміністратор рецепції, Система
- **Тип процесу:** Наскрізний бізнес-процес

## Опис

Повний наскрізний процес обробки замовлення клієнта від моменту створення до закриття візиту та синхронізації з бухгалтерською системою 1С. Процес забезпечує повний цикл обслуговування клієнта з автоматичною фіскалізацією, списанням запасів та інтеграцією з зовнішніми системами.

## Детальна послідовність кроків

### 1. Створення замовлення (UC-FR6.3.1)
**Відповідальний:** Адміністратор рецепції
**Дія:** Створення замовлення клієнта в POS-системі з вибором товарів/послуг

### 2. Друк на кухню/бар (UC-FR6.3.15)
**Відповідальний:** Система
**Дія:** Автоматичне надсилання замовлення на відповідні принтери (кухня, бар) для виконання

### 3. Застосування програми лояльності (UC-FR6.3.2)
**Відповідальний:** Система/Адміністратор рецепції
**Дія:** Застосування знижок, використання та нарахування бонусних балів згідно з програмою лояльності клієнта

### 4. Обробка оплати (UC-FR6.3.3)
**Відповідальний:** Адміністратор рецепції
**Дія:** Прийняття оплати різними методами (готівка, картка, безготівковий розрахунок, бонуси)

### 5. Фіскалізація (UC-FR6.3.5)
**Відповідальний:** Система
**Дія:** Автоматичний друк фіскального чека через інтегрований РРО (реєстратор розрахункових операцій)

### 6. Закриття візиту (UC-FR6.3.7)
**Відповідальний:** Система
**Дія:** Завершення візиту клієнта в системі, оновлення статусу

### 7. Списання запасів (UC-FR6.4.8)
**Відповідальний:** Система
**Дія:** Автоматичне списання використаних інгредієнтів та товарів зі складу на основі рецептур та проданих позицій

### 8. Прив'язка до юридичної особи (UC-FR6.3.14)
**Відповідальний:** Система
**Дія:** Автоматична прив'язка транзакції до відповідної юридичної особи для коректного бухгалтерського обліку

### 9. Інтеграція з 1С
**Відповідальний:** Система
**Дія:** Передача всіх даних транзакції в систему 1С для бухгалтерського обліку

## Передумови

- Клієнт готовий зробити замовлення
- Адміністратор рецепції авторизований в системі
- POS-система функціонує коректно
- Налаштовано інтеграцію з РРО та 1С
- Принтери кухні/бару підключені та готові до роботи

## Післяумови (Результат)

- Замовлення повністю виконано та оплачено
- Фіскальний чек видано клієнту
- Запаси автоматично списані зі складу
- Транзакція прив'язана до юридичної особи
- Дані синхронізовані з 1С
- Візит клієнта закрито в системі

## Виняткові ситуації

- **Помилка РРО:** Система повідомляє про проблему, необхідне ручне втручання
- **Відсутність з'єднання з 1С:** Дані зберігаються в черзі для подальшої синхронізації
- **Недостатньо запасів:** Система попереджає до завершення замовлення
- **Помилка оплати:** Транзакція скасовується, замовлення повертається до статусу "Очікує оплати"

## Пов'язані Use Cases

- UC-FR6.3.1: Створення замовлення
- UC-FR6.3.15: Друк замовлення на кухню/бар
- UC-FR6.3.2: Управління програмою лояльності
- UC-FR6.3.3: Обробка платежів
- UC-FR6.3.5: Фіскалізація
- UC-FR6.3.7: Закриття візиту
- UC-FR6.4.8: Списання запасів
- UC-FR6.3.14: Прив'язка до юридичної особи

## Метрики успішності

- Час виконання повного процесу
- Відсоток успішних фіскалізацій
- Швидкість синхронізації з 1С
- Точність списання запасів
